; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

; Common ESP32 settings (shared by both USB + OTA envs)
; ------------------------------------------------------------------
[env]
platform  = espressif32
board     = esp32dev
framework = arduino

monitor_speed = 115200

build_flags =
    -std=gnu++17
    -DCORE_DEBUG_LEVEL=0

; use our custom partition layout
board_build.partitions = partitions_ota_big.csv

; update max app size to match app0 size in partitions_ota_big.csv (0x190000)
board_upload.maximum_size = 1638400

lib_deps =
    bblanchon/ArduinoJson @ ^7.0.0
    ESP32Servo


; ------------------------------------------------------------------
; Hard-line / USB upload environment
; ------------------------------------------------------------------
[env:esp32_usb]
upload_protocol = esptool
upload_port     = /dev/tty.usbserial-0001
monitor_port    = /dev/tty.usbserial-0001

; Enable verbose debug prints for dev
build_flags =
    ${env.build_flags}
    -DENABLE_DEBUG_LOGS=1


; ------------------------------------------------------------------
; OTA upload environment
; ------------------------------------------------------------------
[env:esp32_ota]
upload_protocol = espota
upload_port     = ESP32-bot.local

upload_flags =
    --port=3232

; No ENABLE_DEBUG_LOGS here â†’ DBG_* macros compile out
build_flags =
    ${env.build_flags}
    ; -DENABLE_DEBUG_LOGS=1   ; uncomment if you ever want OTA debug too
