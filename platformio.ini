; PlatformIO Project Configuration File

; ------------------------------------------------------------------
; Common ESP32 settings (shared by both USB + OTA envs)
; ------------------------------------------------------------------
[env]
platform  = espressif32
board     = esp32dev
framework = arduino

monitor_speed = 115200

build_flags =
    -std=gnu++17
    -DCORE_DEBUG_LEVEL=0
    -Os
    -ffunction-sections
    -fdata-sections
    -Wl,--gc-sections

; Use our custom dual-OTA partition layout with larger app slots
board_build.partitions = partitions_ota_big.csv

; Max app size matches app0/app1 = 0x1D0000 (1,917,952 bytes)
; You can also just comment this out and let PlatformIO infer it.
board_upload.maximum_size = 1917952

lib_deps =
    bblanchon/ArduinoJson @ ^7.0.0
    ESP32Servo


; ------------------------------------------------------------------
; Hard-line / USB upload environment
; ------------------------------------------------------------------
[env:esp32_usb]
upload_protocol = esptool
upload_port     = /dev/tty.usbserial-0001
monitor_port    = /dev/tty.usbserial-0001

; Logs OFF by default (Debug.h defaults to 0, so we don't need to define anything)
build_flags =
    ${env.build_flags}
    ; -DENABLE_DEBUG_LOGS=1    ; uncomment if you want verbose logs via USB builds


; ------------------------------------------------------------------
; OTA upload environment
; ------------------------------------------------------------------
[env:esp32_ota]
upload_protocol = espota
upload_port     = ESP32-bot.local

upload_flags =
    --port=3232

; Logs also OFF by default; enable only if you really need OTA-debug builds
build_flags =
    ${env.build_flags}
    ; -DENABLE_DEBUG_LOGS=1    ; uncomment if you ever want OTA builds with logs
